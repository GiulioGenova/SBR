df<-get_BR_data(station = station,datestart = datestart,dateend = dateend,user = user,password = password,host = host,add_names = T,spread = T,round = round)
library(ggplot2)
round="hour"
df<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
View(df)
df<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = F,round = round)
df$Sensor %>% unique
library(dplyr)
df$Sensor %>% unique
df<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
df %>%
ggplot(mapping = aes(x="BWC20_mean",y="BWP20_mean"))+
geom_line()+
facet_wrap(~name)
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name)
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name)+
theme_classic()
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
dateend="2018-10-20"
df<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
round="day"
dateend="2018-10-25"
df<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
df %>%
ggplot(mapping = aes(x=BWC40_mean,y=BWP40_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
df %>%
ggplot(mapping = aes(x=BWC40_mean,y=BWP40_mean))+
geom_line()+
facet_wrap(~name)+#,scales = "free"
theme_classic()
df %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
df %>%
ggplot(mapping = aes(x=BWC40_mean,y=BWP40_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+#
theme_classic()
text<-read.csv("texture_metadata.csv")
View(text)
View(df)
library(SBR)
library(ggpmisc)
library(purrr)
library(polynom)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
texture <- read.csv("texture_metadata.csv",header = T,sep = ",",dec = ".")
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40mean)
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40_mean)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
library(tidyr)
library(dplyr)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
texture$BWP <- paste0(texture$BWP,"mean")
texture$BWC <- paste0(texture$BWC,"mean")
BWC <- texture %>%
dplyr::select(name,BWC,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWC)
BWP <- texture %>%
dplyr::select(name,BWP,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWP)
text <- bind_rows(BWC,BWP)
df <- left_join(db_SBR_res,text) %>% filter(!is.na(value))
df <- df %>% spread(measure,value)
df1 <- df %>%  select(-BWP,-sensor) %>% filter(!is.na(BWC))
df2 <- df %>%  select(-BWC,-sensor) %>% filter(!is.na(BWP))
df <- left_join(df1,df2)
library(SBR)
library(ggpmisc)
library(purrr)
library(polynom)
library(tidyr)
library(dplyr)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
texture <- read.csv("texture_metadata.csv",header = T,sep = ",",dec = ".")
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40_mean)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
texture$BWP <- paste0(texture$BWP,"mean")
texture$BWC <- paste0(texture$BWC,"mean")
BWC <- texture %>%
dplyr::select(name,BWC,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWC)
BWP <- texture %>%
dplyr::select(name,BWP,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWP)
text <- bind_rows(BWC,BWP)
df <- left_join(db_SBR_res,text) %>% filter(!is.na(value))
df <- df %>% spread(measure,value)
df1 <- df %>%  select(-BWP,-sensor) %>% filter(!is.na(BWC))
df2 <- df %>%  select(-BWC,-sensor) %>% filter(!is.na(BWP))
df <- left_join(df1,df2)
library(SBR)
library(ggpmisc)
library(purrr)
library(polynom)
library(tidyr)
library(dplyr)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
texture <- read.csv("texture_metadata.csv",header = T,sep = ",",dec = ".")
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40_mean)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
texture$BWP <- paste0(texture$BWP,"_mean")
texture$BWC <- paste0(texture$BWC,"_mean")
BWC <- texture %>%
dplyr::select(name,BWC,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWC)
BWP <- texture %>%
dplyr::select(name,BWP,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWP)
text <- bind_rows(BWC,BWP)
df <- left_join(db_SBR_res,text) %>% filter(!is.na(value))
df <- df %>% spread(measure,value)
df1 <- df %>%  select(-BWP,-sensor) %>% filter(!is.na(BWC))
df2 <- df %>%  select(-BWC,-sensor) %>% filter(!is.na(BWP))
df <- left_join(df1,df2)
library(SBR)
library(ggpmisc)
library(purrr)
library(polynom)
library(tidyr)
library(dplyr)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
texture <- read.csv("texture_metadata.csv",header = T,sep = ",",dec = ".")
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40_mean)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
texture$BWP
library(SBR)
library(ggpmisc)
library(purrr)
library(polynom)
library(tidyr)
library(dplyr)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
texture <- read.csv("texture_metadata.csv",header = T,sep = ",",dec = ".")
db_SBR_res <- get_BR_data(station = station,
datestart = datestart,
dateend = dateend,
user = user,password = password,host=host,
add_names = T,
spread = T,round = round) %>%
dplyr::select(TimeStamp,name,BWP20_mean,BWP40_mean,BWC20_mean,BWC40_mean)
db_SBR_res <- db_SBR_res %>% gather(sensor,value,-TimeStamp,-name)
texture$BWP <- paste0(texture$BWP,"_mean")
texture$BWC <- paste0(texture$BWC,"_mean")
BWC <- texture %>%
dplyr::select(name,BWC,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWC)
BWP <- texture %>%
dplyr::select(name,BWP,abbrUSDA,abbrDE.BK94,textFingerprobe,depth) %>%
gather(measure,sensor,BWP)
text <- bind_rows(BWC,BWP)
df <- left_join(db_SBR_res,text) %>% filter(!is.na(value))
df <- df %>% spread(measure,value)
df1 <- df %>%  select(-BWP,-sensor) %>% filter(!is.na(BWC))
df2 <- df %>%  select(-BWC,-sensor) %>% filter(!is.na(BWP))
df <- left_join(df1,df2)
df <- df %>%
group_by(name,depth) %>%
mutate(diffWC=c(0,diff(BWC)),
flag=ifelse(diffWC>= 0,0,1)) %>%
filter(flag == 1) %>%
ungroup
q <- df %>%
ggplot(aes(x=BWC,y=BWP,color=depth))+
geom_point()+
#geom_smooth() +
facet_wrap(~abbrUSDA,scales = "free")+
theme_light()
q
q <- df %>%
ggplot(aes(x=BWC,y=BWP,color=as.factor(depth)))+
geom_point()+
#geom_smooth() +
facet_wrap(~abbrUSDA,scales = "free")+
theme_light()
q
q <- df %>%
ggplot(aes(x=BWC,y=BWP,color=as.factor(depth)))+
geom_point()+
#geom_smooth() +
facet_wrap(~abbrUSDA,scales = "free")+
theme_light()
q
r <- df %>%
ggplot(aes(x=BWC,y=BWP,color=name))+
geom_point()+
#geom_smooth() +
facet_wrap(~textFingerprobe,scales = "free")+
theme_light()
r
q <- df %>%
ggplot(aes(x=BWC,y=BWP,color=abbrUSDA,shape=as.factor(depth)))+
geom_point()+
#geom_smooth() +
facet_wrap(~name,scales = "free")+
theme_light()
q
db<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
db %>%
ggplot(mapping = aes(x=BWC20_mean,y=BWP20_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+
theme_classic()
db %>%
ggplot(mapping = aes(x=BWC40_mean,y=BWP40_mean))+
geom_line()+
facet_wrap(~name,scales = "free")+#
theme_classic()
library(SBR)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
db<-get_BR_data(station = station,datestart = datestart,
dateend = dateend,user = user,
password = password,host = host,
add_names = T,spread = T,round = round)
long=11.157978
lat=46.657158
provSensor=c("N","GS")
db <- mergeData(long = long,lat = lat,
datestart = datestart,
dateend = dateend,
provSensor = provSensor,
password = password,user = user,host = host)
et <- ET(db)
library(Rcpp)
sourceCpp(file="cumsumBounded.cpp")
sourceCpp(file="cumsumBounded.cpp")
find_rtools()
package_version("Devtools")
package_version("devtools")
packageDescription("devtools")
library(pkgbuild)
find_rtools()
sourceCpp(file="cumsumBounded.cpp")
sourceCpp(file="cumsumBounded.cpp")
install.packages("devtools")
library(SBR)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
long=11.157978
lat=46.657158
provSensor=c("N","GS")
db <- mergeData(long = long,lat = lat,
datestart = datestart,
dateend = dateend,
provSensor = provSensor,
password = password,user = user,host = host)
et <- ET(db)
library(Rcpp)
library(pkgbuild)
library(devtools)
find_rtools()
sourceCpp(file="cumsumBounded.cpp")
library(SBR)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
long=11.157978
lat=46.657158
provSensor=c("N","GS")
db <- mergeData(long = long,lat = lat,
datestart = datestart,
dateend = dateend,
provSensor = provSensor,
password = password,user = user,host = host)
et <- ET(db)
library(Rcpp)
library(pkgbuild)
library(devtools)
find_rtools()
sourceCpp(file="cumsumBounded.cpp")
library(Rcpp)
library(pkgbuild)
library(devtools)
install.packages("devtools")
library(Rcpp)
library(pkgbuild)
library(devtools)
find_rtools()
sourceCpp(file="cumsumBounded.cpp")
library(SBR)
password='roMonaLisa$14pr'
user='ROeuracMonalisa'
host='95.171.35.104'
round="day"
#datestart=Sys.Date()-4
datestart="2018-08-31"
dateend="2018-10-25"
station=names_file[which(names_file$name%in%c("Latsch_3",
"Latsch_1",
"Latsch_4",
"Girlan_1",
"Gries_2",
"Unterrain_2",
"Tramin_13er",
"Nals_2",
"Terlan_3")),"id"]
long=11.157978
lat=46.657158
provSensor=c("N","GS")
db <- mergeData(long = long,lat = lat,
datestart = datestart,
dateend = dateend,
provSensor = provSensor,
password = password,user = user,host = host)
et <- ET(db)
et$ETc
cumsumBounded(x = et$ETc,low = 1,high = 20)
cumsumBounded(x = et$ETc,low = 1,high = 20)
et <- et %>% mutate(etsum=cumsumBounded(x = ETc,low = 1,high = 20))
library(dplyr)
et <- et %>% mutate(etsum=cumsumBounded(x = ETc,low = 1,high = 20))
View(et)
setwd("..")
Rcpp.package.skeleton("IrrigSouthTyrol", example_code = FALSE,
cpp_files = c("cumsumBounded.cpp"))
setwd("..")
Rcpp.package.skeleton("IrrigSouthTyrol", example_code = FALSE,
cpp_files = c("cumsumBounded.cpp"))
library(Rcpp)
Rcpp.package.skeleton("IrrigSouthTyrol", example_code = FALSE,
cpp_files = c("cumsumBounded.cpp"))
Rcpp::compileAttributes()
